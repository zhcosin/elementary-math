
\section{数列概要}
\label{sec:number-sequence-general}

\subsection{数列概念}

数列就是一个数的序列，可以是有限序列也可以是无限序列，按下标记法可以写成$a_1,a_2,\ldots$，有时为了方便也可以让下标从零开始$a_0,a_1,a_2,\ldots$，甚至作为无穷序列时，还可以把下标扩展到负整数:$\cdots,a_{-2},a_{-1},a_0,a_1,a_2,\cdots$，成为一个双向无穷数列，如果有一个公式可以把数列的每一项表成它的下标的函数，就称此公式为该数列的通项公式。数列本质上是定义在整数集或者正整数集上的函数。

\begin{example}
  任一实数在十进制下可以表为
  \[ a_na_{n-1}\cdots a_1a_0.a_{-1}a_{-2}\cdots \]
  其中$a_i$取值范围是$0,1,\ldots,9$，这便可以视为一个数列，而且是单侧无穷数列，而这个实数的值是
  \[ a_n\cdot 10^n + a_{n-1} \cdot 10^{n-1} + \cdots + a_1 \cdot 10 + a_0 \cdot 10^0 + a_{-1} \cdot 10^{-1} + a_{-2} \cdot 10^{-2} +\cdots \]
\end{example}

\subsection{等差数列与等比数列}

等差数列和等比数列是最常见的两种数列。

\begin{definition}
 如果一个数列$\ldots,a_{-2},a_{-1},a_0,a_1,a_2,\ldots$中，任一项减去它减一项所得差值都相同，即存在常数$d$，对任意整数$n$都有$a_n-a_{n-1}=d$，则称此数列为 \emph{等差数列}，而常数$d$称为此等差数列的\emph{公差}.
\end{definition}

显然，正整数数列$\ldots,-2,-1,0,1,2,\ldots$是公差为1的等差数列，任何项都取相同值的\emph{常数数列}则是公差为零的等差数列。

\begin{theorem}
对于等差数列中的任意两项（无论顺序）有
\[ a_n-a_m=(n-m)d \]
\end{theorem}

\begin{proof}[证明]
证明是容易的，只要证明$n\geqslant m$的情况即可（否则可以反过来相减），首先可以验证$n$与$m$相等时该等式成立，而后有
\[ a_n-a_m=\sum_{k=m}^{n-1}(a_{k+1}-a_k)=(n-m)d \]
当然，对差值$n-m$施行归纳法也是可行的。
\end{proof}

假定我们知道$a_0$和公差$d$，在上式中取$m=0$，我们就得到等差数列的通项公式
\begin{theorem}
  等差数列的每一项可以由$a_0$及公差$d$表为
\[ a_n=a_0+nd \]
这便是等差数列的通项公式.
\end{theorem}

当然通项并不一定非得使用$a_0$来表示，$a_n=a_1+(n-1)d$，$a_n=a_{100}+(n-100)d$也都是通项。

易见这通项是关于$n$的一次函数，实际上容易证明，如果数列的通项可表成关于下标的一次函数，则它必然是等差数列。

显然考虑对等差数列进行某种求和，如果从$a_0$开始，向正下标或者负下标进行累加，$n$是任意一个整数（无论正负），记$S_n=\sum_{i=0}^{n}a_n$，则
\[ S_n=\sum_{i=0}^na_i=\sum_{i=0}^n(a_0+nd)=(n+1)a_0+d\sum_{i=0}^ni\]
于是这个求和就归结为对自然数序列$0,1,2,\ldots,n$进行求和，高斯曾经口算出$1+2+3+\cdots+100=5050$，他的计算方法是，将1与100相加得101，2与99相加得101，如此这般，最后50与51相加得101，于是$1+2+\cdots+100=50 \times 101=5050$，把这个方法略加改造便得出如下的计算$1+2+\cdots+n$的方法，为了避免$n$的奇偶性带来分组分不完从而还需要分奇偶讨论的问题，再拿一个式子$n+(n-1)+\cdots+2+1$与$1+2+\cdots+(n-1)+n$进行相加，则这两个式子对应位置上的两数之和都是$n+1$，所以最终得公式
\[ 1+2+\cdots+n = \frac{1}{2}n(n+1) \]
不必怀疑右端会有出现小数的可能，因为作为连续的两个自然数$n$和$n+1$中必定一奇一偶，所以右端永不会为小数。

把这公式应用到上面的式子便得
\begin{theorem}
  在公差为$d$的等差数列$a_n$中，有
  \[ S_n=\sum_{i=0}^na_i=(n+1)a_0+\frac{1}{2}n(n+1)d \]
  其中$n$可以是任意整数(包括负整数)。
\end{theorem}

上面求$1+2+\cdots+n$的方法称为\emph{倒序相加法}，当然也可以直接把这方法应用到$S_n=a_0+a_1+\cdots+a_n$上，同样可得出上面的结果.

\begin{definition}
  如果一数列$\ldots,a_{-2},a_{-1},a_0,a_1,a_2,\ldots$中，任意一项与前一项的比值都是同一非零常数，即存在非零常数$q$，使得对于任意整数$n$都有$a_n / a_{n-1} = q$成立，则称此数列是 \emph{等比数列}，而比值常数$q$称为它的 \emph{公比}.
\end{definition}

对于等比数列，如果它的各项都是正的，取对数即可变身为一个等差数列。对于所有的等比数列，同样可以得出类似于等差数列的结论来，即是

\begin{theorem}
对于公比为$q$的等比数列$\cdots,a_{-2},a_{-1},a_0,a_1,a_2,\cdots$，对任意整数$n$和任意整数$m$都成立
\[ \frac{a_n}{a_m}=q^{n-m} \]
\end{theorem}

并由此得出通项
\begin{theorem}
  公比为$q$的等比数列$\ldots,a_{-2},a_{-1},a_0,a_1,a_2,\ldots$的通项可表为
 \[ a_n=a_0q^n \]
\end{theorem}

关于等比数列的求和
\[ S_n = a_1+a_2+\cdots+a_n = a_1(1+q+\cdots+q^{n}) \]
这就归结为对$1+q+q^2+\cdots+q^{n}$求值，

由数学归纳法可得出下面的乘法公式，它也是平方差公式和立方差公式的自然推广
\begin{equation}
  \label{eq:a-power-n-substract-b-power-n}
 a^n-b^n = (a-b)(a^{n-1}+a^{n-2}b+\cdots+ab^{n-2}+b^{n-1}) 
\end{equation}
式中$n$是任意正整数，

在式中取$a=1,b=q$便可得出，对于任意正整数$n$，成立
\[ 1+q+\cdots+q^{n} = \frac{1-q^{n+1}}{1-q} \]
若$n$为负整数，则上式中以$1/q$代$q$，便知上式仍然成立，于是对于等比数列就有
\begin{theorem}
  在以$q$为公比的等比数列$\ldots,a_{-2},a_{-1},a_0,a_1,a_2,\ldots$中，对于任意整数$n$都有
  \[ S_n = \sum_{i=0}^na_i = \frac{a_0(1-q^{n+1})}{1-q} \]
\end{theorem}

还可以以另外一种方式得出这公式，因为
\[ S_n = a_0+a_1+\cdots+a_n \]
两端同乘以公比$q$，便可得出
\[ qS_n = q(a_0+a_1+\cdots+a_n) = a_1+a_2+\cdots+a_n+a_{n+1} \]
于是
\[ (1-q)S_n = a_0-a_{n+1} = a_0 \]
所以得出
\[ S_n = \frac{a_0-a_{n+1}}{1-q} = \frac{a_0(1-q^{n+1})}{1-q} \]
当然这过程中要求$q \neq 1$，而对于$q=1$的情况，显然公式也是对的。

这个方法称为 \emph{错位相减法}，下面这个例子提示了这个方法的一些用途。

\begin{example}[错位相减法的一个用途]
  考虑对数列$a_n = n q^n(n=1,2,3,\ldots)$进行求和，这里要求$q \neq 1$，否则就变成早已解决过的问题了。同样有
  \[ S_n = a_1+a_2+\cdots+a_n = q+2q^2+3q^3 + \cdots + (n-1)q^{n-1} + nq^n \]
  两端同乘以$q$得
  \[ qS_n = q^2+2q^3+3q^4 + \cdots + (n-1)q^n + nq^{n+1} \]
  把以上两式相减，得
  \[ (1-q)S_n = (q + q^2 + \cdots + q^n) - n q^{n+1} \]
  显然上式右端括号中的部分是等比数列的求和，于是$S_n$便可以求出。

  接下来再考虑数列$a_n=n^mq^n(n=1,2,3,\ldots)$，其中$m$是个正整数,记
  \[ S_m(n) = \sum_{i=1}^na_i = \sum_{i=1}^n n^m q^n = q + 2^mq^2 + \cdots + (n-1)^mq^{n-1} + n^m q^m \]
  进行同样的过程有
  \[ qS_m(n) = q^2 + 2^mq^3 + \cdots + (n-1)^m q^n + n^m q^{n+1} \]
  两式相减
  \[ (1-q)S_m(n) = q +(2^m-1)q^2 + (3^m-2^m)q^3 + \cdots + (n^m-(n-1)^m)q^m - n^mq^{n+1}  \]
  而利用下面的公式(它可以由\autoref{eq:a-power-n-substract-b-power-n}得出，也可以由二项式定理得出)
  \[ (1+k)^n-k^n = 1+k+k^2 + \cdots + k^{n-1} \]
  上式可化为
  \begin{eqnarray*}
    (1-q)S_m(n) & = & \sum_{i=1}^n(i^m-(i-1)^m)q^i - n^mq^{n+1} \\
                & = & \sum_{i=0}^{n-1}((1+i)^m-i^m)q^{i+1} - n^mq^{n+1} \\
                & = & \sum_{i=0}^{n-1}\sum_{j=0}^{m-1}i^jq^{i+1} - n^mq^{n+1} \\
                & = & \sum_{j=0}^{m-1}\sum_{i=0}^{n-1}i^jq^{i+1} - n^mq^{n+1} \\
    & = & q\sum_{j=0}^{m-1}S_j(n-1) - n^mq^{n+1}
  \end{eqnarray*}
  这意味着$S_m(n)$可以用$S_0(n-1),S_1(n-1),\ldots,S_{m-1}(n-1)$来表示，即具有递推性，而$S_0(n-1)$显然就是等比数列求和，于是$S_m(n)$便可以求出来。

  进一步，便可以求形如$a_n=p(n)q^n$这样的数列的和，其中$p(n)$是关于$n$的多项式，只是这过程将越来越繁琐，如此机械化的计算方法，由计算机程序来进行是再合适不过了。
\end{example}

\begin{example}[自然数的幂和]
  \label{example:sum-of-power-of-integer}
  在上面得出了公式
  \[ 1+2+\cdots+n = \frac{1}{2}n(n+1) \]
  现在就来讨论下一般的$S_m(n)=\sum_{i=1}^ni^m$的求和公式，仍然由
  \[ (1+k)^m-k^m = 1 + k + k^2 + \cdots + k^{m-1} \]
  对$k=1,2,\ldots,n$进行累加，便得
  \[ (1+n)^m-1 = S_0(n)+S_1(n)+S_2(n) + \cdots S_{m-1}(n) \]
  显然这便是联系着诸$S_m(n)$的递推关系，且有初始公式
  \[ S_0(n) = n \]
  由此出发便能求出任何$S_m(n)$的表达式来，比如说取$m=2$便得
  \[ (1+n)^2-1 = S_0(n)+S_1(n)+S_2(n) \]
  于是得出
  \[ S_2(n) = 1^2+2^2+\cdots+n^2 = \frac{1}{6}n(n+1)(2n+1) \]
  同样不必怀疑右端的整数性，因为$n$与$n+1$作为相邻两个正整数，必然有一个偶数，故$2 \mid n(n+1)$，还需证明$3 \mid n(n+1)(2n+1)$，若是$n$与$n+1$中有3的倍数，则自然不消说，若是$n$与$n+1$都不是3的倍数，则它俩被3除所得余数必然一个是1，另一个是2，于是$2n+1=n+(n+1)$便必然是3的倍数，于是2和3都能整除$n(n+1)(2n+1)$且2与3互素，所以6也能整除它。

  同样再取$m=3$，便可得出
  \[ S_3(n)= 1^3+2^3+\cdots+n^3 = \frac{1}{4}n^2(n+1)^2 \]
  一般的可以知道，$S_m(n)$是关于$n$的$m+1$次多项式。
\end{example}

\subsection{差分与高阶等差数列}
\label{sec:difference-and-high-level-common-difference-sequence}

\begin{definition}
  对于无穷数列$\ldots,a_{-2},a_{-1},a_0,a_1,a_2,\ldots$，定义它的 \emph{一阶差分数列} 为
  \[ \Delta a_n = a_n-a_{n-1} \]
  进一步递归的定义它的$m$阶差分数列是
  \[ \Delta^ma_n = \Delta^{m-1}a_n - \Delta^{m-1}a_{n-1} \]
  即$m$阶差分是$m-1$阶差分的差分，这称为 \emph{高阶差分}，为了方便，可以把数列本身看作它自己的 \emph{零阶差分数列}.
\end{definition}

差分将一个数列变换为另一个数列，这与平方运算把一个数变成另一个数，求导运算把一个函数变成另一个函数没什么差别，所以差分是在数列这种数学对象上的一种运算。

接下来有高阶等差数列的定义
\begin{definition}
  如果一个数列$a_n$的$m$阶差分数列是等差数列，则该数列称为 \emph{$m$阶等差数列}.
\end{definition}

显然等差数列本身即是零阶等差数列，同时，如果一个数列是$m$阶等差数列，则它也必然是$m+1$阶等差数列，$m+2$阶等差数列，等等。

易见
\begin{theorem}
  数列$a_n$是$m$阶等差数列的充分必要条件是$\Delta a_n$是$m-1$阶等差数列.
\end{theorem}

现在讨论一下高阶等差数列的通项问题，先考虑一阶等差数列$a_n$，按定义，它的一阶差分数列是等差数列，于是有
\[ a_n - a_{n-1} = rn+s \]
于是对于整数$n$(包括负整数)，就有
\begin{eqnarray*}
  a_n & = & a_0 + \sum_{i=1}^n(a_i-a_{i-1}) \\
      & = &  a_0 + \sum_{i=1}^n(ri+s) \\
      & = &  a_0 + ns + r\sum_{i=1}^n i \\
  & = & a_0 + ns + \frac{1}{2}rn(n+1)
\end{eqnarray*}
这表明它的通项是关于$n$的二次多项式，再重复同样的过程并利用自然数的幂和公式(\autoref{example:sum-of-power-of-integer})便可得出二阶等差数列的通项是关于$n$的三次多项式，如此等等，于是得出如下重要结果
\begin{theorem}
  无穷数列$\ldots,a_{-2},a_{-1},a_0,a_1$是$m$阶等差数列的充分必要条件是，它的通项能表成关于下标的$m+1$次多项式.
\end{theorem}

\begin{proof}[证明]
  对$m$施行数学归纳法，$m=0$的情况是显然的，假设必要性对于小于$m$的正整数都成立，那么对于一个$m$阶等差数列$a_n$，它的一阶差分数列是$m-1$阶等差数列，因而通项为关于下标的$m$次多项式，于是
  \[ a_n-a_{n-1} = \sum_{j=0}^m b_jn^j \]
  累加得
  \begin{eqnarray*}
    a_n & = & a_0 + \sum_{i=0}^n(a_i-a_{i-1}) \\
        & = & a_0 + \sum_{i=0}^n\sum_{j=0}^mb_ji^j \\
    & = & a_0 + \sum_{j=0}^mb_j\sum_{i=0}^ni^j \\
  \end{eqnarray*}
  在\autoref{example:sum-of-power-of-integer}中，我们就已经知道$\sum_{i=1}^ni^j$是$j+1$次多项式，于是$a_n$便是关于$n$的$m+1$次多项式，所以必要性成立.

  再证充分性，同样施行归纳法，如果数列的通项是关于下标的一次多项式，显然它必然是(零阶)等差数列，即$m=0$时充分性成立，假若充分性对于小于$m$的正整数都成立，现在设数列$a_n$的通项是关于$n$的$m+1$次多项式，即
  \[ a_n = \sum_{i=0}^{m+1}b_in^i \]
  则它的差分数列
  \[ a_{n+1}-a_n = \sum_{i=0}^{m+1}b_i((1+n)^i-n^i) \]
  显然，$n^{m+1}$被抵销，这成为一个次数低于$m+1$的多项式，按归纳假设，这差分数列必然是某一阶的等差数列，且阶数小于$m$，于是原来的数列$a_n$也是某一阶的等差数列，且阶数小于等于$m$，自然也是$m$阶等差数列.
\end{proof}

\subsection{递推数列的通项}

\subsubsection{线性递推数列的通项}

\subsubsection{分式型递推数列的通项}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../../book"
%%% End:
